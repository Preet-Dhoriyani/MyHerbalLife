<?php
// Always start the session at the very beginning of the script
session_start();

// Hardcoded credentials for demonstration
$correct_username = 'preet@gmail.com';
$correct_password = 'Password123!';

$error_message = '';

// If user is already logged in, redirect them to the home page
if (isset($_SESSION['username'])) {
    header("Location: index.php");
    exit();
}

// Check for a "Remember Me" cookie to log in automatically
if (isset($_COOKIE['remember_user']) && $_COOKIE['remember_user'] == $correct_username) {
    $_SESSION['username'] = $correct_username;
    header("Location: index.php");
    exit();
}

// Check if the form has been submitted
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $username = $_POST['username'];
    $password = $_POST['password'];

    // Validate credentials
    if ($username == $correct_username && $password == $correct_password) {
        // Store username in session
        $_SESSION['username'] = $username;

        // If "Remember Me" is checked, set a cookie for 30 days
        if (isset($_POST['remember'])) {
            setcookie('remember_user', $username, time() + (86400 * 30), "/"); // 86400 = 1 day
        }

        // Redirect to the home page
        header("Location: index.php");
        exit();
    } else {
        $error_message = "Invalid username or password!";
    }
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - MyHerbalLife</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="wrapper">
        <header>
            <div class="logo">MyHerbalLife</div>
            <nav>
                <a href="index.php">Back to Home</a>
            </nav>
        </header>

        <main>
            <div class="login-box">
                <h2 class="form-title">Login</h2>
                
                <?php if ($error_message): ?>
                    <p class="error-msg"><?php echo $error_message; ?></p>
                <?php endif; ?>

                <form id="form" action="login.php" method="post" class="login-form">
                    <label for="username">Username or Email:</label>
                    <input type="text" id="username" name="username" placeholder="Username or Email" required />

                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" placeholder="Password" required />

                    <div class="remember-me-group">
                        <input type="checkbox" id="remember" name="remember">
                        <label for="remember">Remember Me</label>
                    </div>

                    <button type="submit">Login</button>
                </form>
                <p class="signup-link">
                    Don't have an account?
                    <a href="signup.html">Signup Here</a>
                </p>
            </div>
        </main>

        <footer>
            <div class="footer-container">
                 <div class="footer-column">
                    <h3>Connect</h3>
                    <a href="https://www.facebook.com/HerbalifeIndiaOfficial/">Facebook</a>
                    <a href="https://www.instagram.com/herbalifeindiaofficial/">Instagram</a>
                    <a href="https://x.com/herbalife">Twitter</a>
                    <a href="https://www.youtube.com/Herbalife">YouTube</a>
                </div>
                <div class="footer-column">
                    <h3>Help</h3>
                    <a href="contact.html">Contact</a>
                    <a href="about.html">About</a>
                    <a href="privacy policy.html">Privacy Policy</a>
                    <a href="terms of use.html">Terms Of Use</a>
                </div>
                <div class="footer-column">
                    <h3>Learn</h3>
                    <a href="usage.html">How to make a shake</a>
                </div>
                <div class="footer-column">
                    <h3>Details</h3>
                    <p>Mo. no.: 8000033177</p>
                    <p>Email: dhoriyanipreet@gmail.com</p>
                    <p>Name: Preet Dhoriyani</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 MyHerbalLife. All rights reserved.</p>
            </div>
        </footer>
    </div>
</body>
</html>